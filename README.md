# L0
Демонстрационный сервис с Kafka, PostgreSQL, кешем.

Включает в себя:
- Получение данных о заказах из брокера сообщений
- Сохранение их в РБД
- Кеширование в памяти
- Предоставление эндпоинта REST API `/order/<order_uid>`

## Архитектура
- Источник данных — Kafka `consumer.go`
- Параллельнная обработка — горутины с передачей данных через канал `worker.go`
- Постоянное хранилище — PostgreSQL `db.go`
- Кеширование в памяти на go map в демонстрационных целях
- REST API с применением Gin
- Запуск через `docker-compose.yml`

## Запуск
### 1. Клонирование репозитория
```
git clone https://github.com/bdrlv/l0
cd l0
```
### 2. Запуск
```
docker compose up -d
```
#### 2.1 Инициализация топика Kafka 
```
make topic.create.orders
```
#### 2.2 Инициализация таблиц PostgreSQL при первом запуске
```
make db.migrate.init
```

## Дополнительные скрипты
### Генератор сообщений с заказами
Продюсер Kafka `producer.go` для отправки тестовых данных
```
go run ./producer/producer.go
```
### Web-интерфейс для получения данных о заказе по id
Запустите в браузере `index.html` и введите номер заказа из лога `producer.go`
